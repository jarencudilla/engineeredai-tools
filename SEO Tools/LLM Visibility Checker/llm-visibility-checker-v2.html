<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Visibility Checker v1.0.0 - Test Your Site's AI Discoverability</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(to bottom right, #0f172a, #1e293b, #0f172a);
            min-height: 100vh;
        }
        .score-ring {
            stroke-dasharray: 339.292;
            transform: rotate(-90deg);
            transform-origin: center;
            transition: stroke-dashoffset 1s ease-in-out;
        }
        .tab-active {
            background: linear-gradient(to right, #3b82f6, #8b5cf6);
            color: white;
        }
    </style>
</head>
<body class="p-6">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-600 rounded-t-lg p-8 shadow-2xl">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <div class="flex items-center gap-4">
                    <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                    </svg>
                    <div>
                        <h1 class="text-3xl font-bold text-white">LLM Visibility Checker</h1>
                        <p class="text-blue-100">Analyze your website's discoverability by AI systems like ChatGPT, Claude, and Perplexity</p>
                    </div>
                </div>
                <div class="text-right">
                    <span class="inline-block px-3 py-1 bg-white/20 rounded-full text-white text-sm font-semibold">v1.0.0</span>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="bg-slate-800 border-x border-slate-700 flex gap-2 p-2">
            <button id="analyzerTab" class="tab-active px-6 py-2 rounded-lg font-medium transition-all">Analyzer</button>
            <button id="aboutTab" class="px-6 py-2 rounded-lg font-medium transition-all text-slate-300 hover:bg-slate-700">About & Updates</button>
        </div>

        <!-- Analyzer Content -->
        <div id="analyzerContent" class="bg-slate-800 rounded-b-lg shadow-2xl border-x border-b border-slate-700 p-8">
            <!-- Input Section -->
            <div class="mb-8">
                <label class="block text-lg font-medium text-slate-200 mb-3">
                    Enter Website URL
                </label>
                <div class="flex gap-3">
                    <input
                        type="url"
                        id="urlInput"
                        placeholder="https://example.com"
                        class="flex-1 bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg"
                    />
                    <button
                        id="analyzeBtn"
                        class="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl"
                    >
                        Analyze Site
                    </button>
                </div>
                <p class="text-slate-400 text-sm mt-2">Note: Due to CORS restrictions, some sites may not be analyzable. The tool works best with sites that allow cross-origin requests.</p>
            </div>

            <!-- Loading State -->
            <div id="loading" class="hidden text-center py-12">
                <div class="inline-block animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500"></div>
                <p class="text-slate-300 mt-4 text-lg">Analyzing your site's LLM visibility...</p>
            </div>

            <!-- Results Section -->
            <div id="results" class="hidden space-y-8">
                <!-- Overall Score -->
                <div class="bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl p-8 border border-slate-700">
                    <div class="flex items-center justify-between flex-wrap gap-8">
                        <div>
                            <h2 class="text-2xl font-bold text-white mb-2">LLM Visibility Score</h2>
                            <p class="text-slate-400">Overall readiness for AI discovery systems</p>
                            <div id="scoreStatus" class="mt-4"></div>
                        </div>
                        <div class="relative">
                            <svg class="w-40 h-40 transform -rotate-90">
                                <circle cx="80" cy="80" r="54" stroke="#1e293b" stroke-width="12" fill="none" />
                                <circle id="scoreCircle" cx="80" cy="80" r="54" stroke="#3b82f6" stroke-width="12" fill="none" 
                                    class="score-ring" stroke-linecap="round" />
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <div class="text-center">
                                    <span id="scoreValue" class="text-4xl font-bold text-white">0</span>
                                    <span class="text-xl text-slate-400">/100</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category Breakdown -->
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div id="schemaCard" class="category-card"></div>
                    <div id="metaCard" class="category-card"></div>
                    <div id="structureCard" class="category-card"></div>
                    <div id="robotsCard" class="category-card"></div>
                    <div id="contentCard" class="category-card"></div>
                    <div id="semanticCard" class="category-card"></div>
                </div>

                <!-- Detailed Recommendations -->
                <div class="bg-slate-900 rounded-xl p-8 border border-slate-700">
                    <h3 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                        <svg class="w-7 h-7 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                        </svg>
                        Recommendations
                    </h3>
                    <div id="recommendations" class="space-y-4"></div>
                </div>

                <!-- Related Articles -->
                <div class="bg-gradient-to-br from-blue-900/20 to-purple-900/20 rounded-xl p-8 border border-blue-500/30">
                    <h3 class="text-2xl font-bold text-white mb-4">üìö Learn More About LLM Optimization</h3>
                    <p class="text-slate-300 mb-6">Deep-dive guides on improving your site's AI discoverability:</p>
                    <div class="grid md:grid-cols-2 gap-4">
                        <a href="https://engineeredai.net/llm-optimization-guide/" target="_blank" class="bg-slate-900/50 hover:bg-slate-900 border border-slate-600 rounded-lg p-4 transition-all group">
                            <h4 class="text-blue-400 group-hover:text-blue-300 font-semibold mb-2">LLM Optimization Guide</h4>
                            <p class="text-slate-400 text-sm">How to structure your content for GPTBot, ClaudeBot, and Perplexity crawlers</p>
                        </a>
                        <a href="https://engineeredai.net/geographic-llm-targeting-guide/" target="_blank" class="bg-slate-900/50 hover:bg-slate-900 border border-slate-600 rounded-lg p-4 transition-all group">
                            <h4 class="text-purple-400 group-hover:text-purple-300 font-semibold mb-2">Geographic LLM Targeting</h4>
                            <p class="text-slate-400 text-sm">Target international audiences through AI-powered discovery systems</p>
                        </a>
                        <a href="https://engineeredai.net/search-engine-discrimination-ai-content-data/" target="_blank" class="bg-slate-900/50 hover:bg-slate-900 border border-slate-600 rounded-lg p-4 transition-all group">
                            <h4 class="text-cyan-400 group-hover:text-cyan-300 font-semibold mb-2">Search Engine Discrimination</h4>
                            <p class="text-slate-400 text-sm">Data-driven analysis of how search engines treat AI-related content</p>
                        </a>
                        <a href="https://qajourney.net/" target="_blank" class="bg-slate-900/50 hover:bg-slate-900 border border-slate-600 rounded-lg p-4 transition-all group">
                            <h4 class="text-green-400 group-hover:text-green-300 font-semibold mb-2">QA Journey</h4>
                            <p class="text-slate-400 text-sm">Tactical QA methodologies and testing strategies</p>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Error State -->
            <div id="error" class="hidden bg-red-900/20 border border-red-500/50 rounded-lg p-6">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-red-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                    </svg>
                    <div>
                        <h3 class="text-red-400 font-semibold mb-1">Analysis Failed</h3>
                        <p id="errorMessage" class="text-red-300"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Content -->
        <div id="aboutContent" class="hidden bg-slate-800 rounded-b-lg shadow-2xl border-x border-b border-slate-700 p-8">
            <div class="max-w-4xl space-y-8">
                <div>
                    <h2 class="text-3xl font-bold text-white mb-4">About LLM Visibility Checker</h2>
                    <p class="text-slate-300 text-lg leading-relaxed">
                        This tool analyzes your website's technical readiness for discovery by Large Language Models (LLMs) like ChatGPT, Claude, and Perplexity. 
                        As AI-powered search becomes mainstream, traditional SEO is no longer enough‚Äîyour content needs to be structured for machine understanding.
                    </p>
                </div>

                <div class="bg-slate-900 rounded-lg p-6 border border-slate-700">
                    <h3 class="text-xl font-bold text-white mb-4">‚ú® Features (v1.0.0)</h3>
                    <ul class="space-y-2 text-slate-300">
                        <li class="flex items-start gap-2">
                            <span class="text-green-400 mt-1">‚úì</span>
                            <span><strong>Schema Markup Analysis</strong> - Detects structured data types and identifies missing elements</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-400 mt-1">‚úì</span>
                            <span><strong>Meta Tags Evaluation</strong> - Checks title, description, Open Graph, and canonical tags</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-400 mt-1">‚úì</span>
                            <span><strong>Content Structure Scoring</strong> - Analyzes heading hierarchy, semantic HTML, and internal linking</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-400 mt-1">‚úì</span>
                            <span><strong>LLM-Friendly Formatting</strong> - Evaluates lists, emphasis, and machine-readable structure</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-400 mt-1">‚úì</span>
                            <span><strong>Actionable Recommendations</strong> - Prioritized suggestions with specific implementation steps</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-400 mt-1">‚úì</span>
                            <span><strong>Detailed Schema Detection</strong> - Shows which schema types were found vs missing</span>
                        </li>
                    </ul>
                </div>

                <div class="bg-blue-900/20 rounded-lg p-6 border border-blue-500/30">
                    <h3 class="text-xl font-bold text-white mb-4">üìã Version History</h3>
                    <div class="space-y-4">
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <span class="px-2 py-1 bg-blue-600 text-white text-xs font-bold rounded">v1.0.0</span>
                                <span class="text-slate-400 text-sm">October 2025</span>
                            </div>
                            <ul class="space-y-1 text-slate-300 text-sm ml-4">
                                <li>‚Ä¢ Initial release with 6 analysis categories</li>
                                <li>‚Ä¢ Schema markup detection and scoring</li>
                                <li>‚Ä¢ Detailed recommendations with priority levels</li>
                                <li>‚Ä¢ Related articles section for learning resources</li>
                                <li>‚Ä¢ Version tracking and patch notes</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-900 rounded-lg p-6 border border-slate-700">
                    <h3 class="text-xl font-bold text-white mb-4">‚ö†Ô∏è Limitations</h3>
                    <ul class="space-y-2 text-slate-300">
                        <li class="flex items-start gap-2">
                            <span class="text-yellow-400">‚Ä¢</span>
                            <span>Cannot check actual LLM crawler logs (requires server access)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-yellow-400">‚Ä¢</span>
                            <span>Cannot verify if content is being cited by AI systems</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-yellow-400">‚Ä¢</span>
                            <span>Some sites may block CORS requests, preventing analysis</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-yellow-400">‚Ä¢</span>
                            <span>Measures technical readiness, not actual visibility in LLM responses</span>
                        </li>
                    </ul>
                </div>

                <div class="bg-gradient-to-r from-purple-900/30 to-blue-900/30 rounded-lg p-6 border border-purple-500/30">
                    <h3 class="text-xl font-bold text-white mb-3">üôè Support This Project</h3>
                    <p class="text-slate-300 mb-4">
                        This tool is free because I built it to solve my own SEO problems. If it helped you optimize your site for LLM visibility, 
                        consider supporting more experiments like this.
                    </p>
                    <div class="flex gap-3 flex-wrap">
                        <a href="#" class="inline-flex items-center gap-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-medium transition-all">
                            ‚òï Buy Me a Coffee
                        </a>
                        <a href="https://paypal.me/JarenCudilla" class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all">
                            üíô PayPal
                        </a>
                        <a href="#" class="inline-flex items-center gap-2 px-4 py-2 bg-pink-600 hover:bg-pink-700 text-white rounded-lg font-medium transition-all">
                            ‚ù§Ô∏è GitHub Sponsors
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-8 text-center text-slate-400">
            <p class="mb-2">Built with AI by <a href="https://engineeredai.net" class="text-blue-400 hover:text-blue-300">EngineeredAI.net</a></p>
            <p class="text-sm">Open source on <a href="https://github.com/jarencudilla/engineeredai-tools" class="text-purple-400 hover:text-purple-300">GitHub</a> ‚Ä¢ Follow on <a href="https://x.com/jaren" class="text-cyan-400 hover:text-cyan-300">Twitter</a> ‚Ä¢ Check out <a href="https://www.facebook.com/NotQuiteSentient/" class="text-cyan-400 hover:text-cyan-300">Not Quite Sentient FB</a></p>
        </div>
    </div>

    <script>
        // Tab switching
        const analyzerTab = document.getElementById('analyzerTab');
        const aboutTab = document.getElementById('aboutTab');
        const analyzerContent = document.getElementById('analyzerContent');
        const aboutContent = document.getElementById('aboutContent');

        analyzerTab.addEventListener('click', () => {
            analyzerTab.classList.add('tab-active');
            aboutTab.classList.remove('tab-active');
            analyzerContent.classList.remove('hidden');
            aboutContent.classList.add('hidden');
        });

        aboutTab.addEventListener('click', () => {
            aboutTab.classList.add('tab-active');
            analyzerTab.classList.remove('tab-active');
            aboutContent.classList.remove('hidden');
            analyzerContent.classList.add('hidden');
        });

        // Analysis functionality
        const analyzeBtn = document.getElementById('analyzeBtn');
        const urlInput = document.getElementById('urlInput');
        const loading = document.getElementById('loading');
        const results = document.getElementById('results');
        const error = document.getElementById('error');

        analyzeBtn.addEventListener('click', analyzeWebsite);
        urlInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') analyzeWebsite();
        });

        async function analyzeWebsite() {
            const url = urlInput.value.trim();
            
            if (!url || !isValidUrl(url)) {
                showError('Please enter a valid URL (e.g., https://example.com)');
                return;
            }

            hideAll();
            loading.classList.remove('hidden');

            try {
                const html = await fetchWebpage(url);
                const analysis = performAnalysis(html, url);
                displayResults(analysis);
            } catch (err) {
                showError(err.message);
            }
        }

        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        async function fetchWebpage(url) {
            const proxyUrl = 'https://api.allorigins.win/raw?url=';
            const response = await fetch(proxyUrl + encodeURIComponent(url));
            
            if (!response.ok) {
                throw new Error('Unable to fetch the website. It may be blocking cross-origin requests.');
            }
            
            return await response.text();
        }

        function performAnalysis(html, url) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            
            const analysis = {
                schema: analyzeSchema(doc),
                meta: analyzeMeta(doc),
                structure: analyzeStructure(doc),
                robots: { score: 50, status: 'Unknown', note: 'Cannot check robots.txt from browser', details: [] },
                content: analyzeContent(doc),
                semantic: analyzeSemantic(doc)
            };

            analysis.overall = calculateOverallScore(analysis);
            analysis.recommendations = generateRecommendations(analysis);
            
            return analysis;
        }

        function analyzeSchema(doc) {
            const scripts = doc.querySelectorAll('script[type="application/ld+json"]');
            let score = 0;
            const found = [];
            const missing = [];
            
            scripts.forEach(script => {
                try {
                    const json = JSON.parse(script.textContent);
                    const types = extractSchemaTypes(json);
                    found.push(...types);
                } catch (e) {}
            });

            const uniqueFound = [...new Set(found)];

            // Scoring with more granularity
            if (uniqueFound.includes('Article')) {
                score += 20;
            } else {
                missing.push('Article');
            }
            
            if (uniqueFound.includes('LocalBusiness') || uniqueFound.includes('Organization')) {
                score += 25;
            } else {
                missing.push('LocalBusiness/Organization');
            }
            
            if (uniqueFound.includes('BreadcrumbList')) {
                score += 15;
            } else {
                missing.push('BreadcrumbList');
            }
            
            if (uniqueFound.includes('WebSite')) {
                score += 15;
            } else {
                missing.push('WebSite');
            }

            if (uniqueFound.includes('Person')) score += 10;
            if (uniqueFound.includes('WebPage')) score += 5;
            if (scripts.length > 0) score += 10;

            return {
                score: Math.min(score, 100),
                found: uniqueFound,
                missing: missing,
                status: score > 70 ? 'Excellent' : score > 40 ? 'Good' : 'Needs Work',
                details: [
                    `Found ${scripts.length} schema block(s)`,
                    `Detected types: ${uniqueFound.length > 0 ? uniqueFound.join(', ') : 'None'}`,
                    missing.length > 0 ? `Missing: ${missing.join(', ')}` : 'All key schemas present'
                ]
            };
        }

        function extractSchemaTypes(obj) {
            const types = [];
            if (obj['@type']) types.push(obj['@type']);
            if (obj['@graph']) {
                obj['@graph'].forEach(item => {
                    if (item['@type']) types.push(item['@type']);
                });
            }
            return types;
        }

        function analyzeMeta(doc) {
            let score = 0;
            const issues = [];
            const details = [];
            
            const title = doc.querySelector('title');
            if (title && title.textContent.length > 10 && title.textContent.length < 70) {
                score += 25;
                details.push(`Title: ${title.textContent.length} chars (optimal: 50-60)`);
            } else {
                issues.push('Title missing, too short, or too long');
                details.push(title ? `Title: ${title.textContent.length} chars (too ${title.textContent.length > 70 ? 'long' : 'short'})` : 'No title tag');
            }

            const desc = doc.querySelector('meta[name="description"]');
            if (desc && desc.content.length > 50 && desc.content.length < 170) {
                score += 25;
                details.push(`Description: ${desc.content.length} chars (optimal: 120-160)`);
            } else {
                issues.push('Meta description missing, too short, or too long');
                details.push(desc ? `Description: ${desc.content.length} chars` : 'No meta description');
            }

            const og = doc.querySelectorAll('meta[property^="og:"]');
            if (og.length >= 3) {
                score += 25;
                details.push(`Open Graph: ${og.length} tags found`);
            } else {
                issues.push('Incomplete Open Graph tags (need title, description, image minimum)');
                details.push(`Open Graph: Only ${og.length} tags`);
            }

            const canonical = doc.querySelector('link[rel="canonical"]');
            if (canonical) {
                score += 25;
                details.push('Canonical link present');
            } else {
                issues.push('Missing canonical link');
                details.push('No canonical link');
            }

            return {
                score,
                issues,
                details,
                status: score > 70 ? 'Excellent' : score > 40 ? 'Good' : 'Needs Work'
            };
        }

        function analyzeStructure(doc) {
            let score = 0;
            const issues = [];
            const details = [];

            const h1 = doc.querySelectorAll('h1');
            if (h1.length === 1) {
                score += 30;
                details.push('Single H1 tag (optimal)');
            } else {
                issues.push(h1.length === 0 ? 'No H1 tag found' : `Multiple H1 tags (${h1.length}) - should be one`);
                details.push(`H1 count: ${h1.length}`);
            }

            const h2 = doc.querySelectorAll('h2');
            const h3 = doc.querySelectorAll('h3');
            if (h2.length >= 2) {
                score += 25;
                details.push(`H2: ${h2.length}, H3: ${h3.length} (good hierarchy)`);
            } else {
                issues.push('Few or no H2 headings - poor content structure');
                details.push(`H2: ${h2.length}, H3: ${h3.length}`);
            }

            const nav = doc.querySelector('nav');
            if (nav) {
                score += 15;
                details.push('Navigation element present');
            }

            const article = doc.querySelector('article, main');
            if (article) {
                score += 15;
                details.push('Semantic main content tag present');
            } else {
                issues.push('No semantic article/main tags - harder for LLMs to identify content');
                details.push('No article/main tag');
            }

            const links = doc.querySelectorAll('a[href^="/"], a[href*="' + new URL(urlInput.value).hostname + '"]');
            if (links.length >= 5) {
                score += 15;
                details.push(`${links.length} internal links found`);
            } else {
                issues.push('Limited internal linking - reduces content mesh');
                details.push(`Only ${links.length} internal links`);
            }

            return {
                score: Math.min(score, 100),
                issues,
                details,
                status: score > 70 ? 'Excellent' : score > 40 ? 'Good' : 'Needs Work'
            };
        }

        function analyzeContent(doc) {
            const body = doc.body.textContent || '';
            const wordCount = body.trim().split(/\s+/).length;
            
            let score = 0;
            const issues = [];
            const details = [];

            if (wordCount > 1000) {
                score += 40;
                details.push(`${wordCount} words (comprehensive)`);
            } else if (wordCount > 500) {
                score += 25;
                details.push(`${wordCount} words (adequate)`);
            } else {
                issues.push(`Content appears thin (${wordCount} words) - LLMs prefer depth`);
                details.push(`${wordCount} words (thin content)`);
            }

            const lists = doc.querySelectorAll('ul, ol');
            if (lists.length > 0) {
                score += 20;
                details.push(`${lists.length} lists (scannable)`);
            } else {
                issues.push('No lists found - harder for LLMs to parse structured info');
                details.push('No lists present');
            }

            const paragraphs = doc.querySelectorAll('p');
            if (paragraphs.length >= 3) {
                score += 20;
                details.push(`${paragraphs.length} paragraphs`);
            }

            const code = doc.querySelectorAll('pre, code');
            if (code.length > 0) {
                score += 10;
                details.push(`${code.length} code blocks`);
            }

            const images = doc.querySelectorAll('img[alt]');
            const imagesTotal = doc.querySelectorAll('img');
            if (images.length > 0) {
                score += 10;
                details.push(`${images.length}/${imagesTotal.length} images have alt text`);
            } else if (imagesTotal.length > 0) {
                issues.push('Images missing alt text - lost context for LLMs');
                details.push(`${imagesTotal.length} images without alt text`);
            }

            return {
                score: Math.min(score, 100),
                wordCount,
                issues,
                details,
                status: score > 70 ? 'Excellent' : score > 40 ? 'Good' : 'Needs Work'
            };
        }

        function analyzeSemantic(doc) {
            let score = 0;
            const issues = [];
            const details = [];

            const headings = doc.querySelectorAll('h1, h2, h3, h4, h5, h6');
            if (headings.length >= 5) {
                score += 30;
                details.push(`${headings.length} total headings (well-structured)`);
            } else {
                issues.push('Limited heading structure - poor content hierarchy');
                details.push(`Only ${headings.length} headings`);
            }

            const semanticTags = doc.querySelectorAll('article, section, aside, nav, header, footer');
            if (semanticTags.length >= 3) {
                score += 25;
                details.push(`${semanticTags.length} semantic HTML5 tags`);
            } else {
                issues.push('Limited semantic HTML5 tags - LLMs benefit from clear structure');
                details.push(`Only ${semanticTags.length} semantic tags`);
            }

            const strongEm = doc.querySelectorAll('strong, em, b, i');
            if (strongEm.length > 0) {
                score += 15;
                details.push(`${strongEm.length} emphasis tags (highlights key terms)`);
            }

            const time = doc.querySelector('time');
            if (time) {
                score += 15;
                details.push('Time element present (temporal context)');
            }

            const lists = doc.querySelectorAll('ul, ol, dl');
            if (lists.length >= 2) {
                score += 15;
                details.push(`${lists.length} lists (structured data)`);
            }

            return {
                score: Math.min(score, 100),
                issues,
                details,
                status: score > 70 ? 'Excellent' : score > 40 ? 'Good' : 'Needs Work'
            };
        }

        function calculateOverallScore(analysis) {
            const weights = {
                schema: 0.25,
                meta: 0.15,
                structure: 0.20,
                robots: 0.10,
                content: 0.20,
                semantic: 0.10
            };

            let total = 0;
            Object.keys(weights).forEach(key => {
                total += analysis[key].score * weights[key];
            });

            return Math.round(total);
        }

        function generateRecommendations(analysis) {
            const recs = [];

            if (analysis.schema.score < 70) {
                recs.push({
                    priority: 'high',
                    category: 'Schema Markup',
                    text: 'Add structured data (schema.org) to help LLMs understand your content context. Schema acts as metadata that AI systems use to categorize and cite your content.',
                    action: analysis.schema.missing.length > 0 
                        ? `Implement missing schemas: ${analysis.schema.missing.join(', ')}` 
                        : 'Implement Article and Organization schema at minimum',
                    why: 'LLMs use schema to understand page type, author, organization, and content relationships. Sites with rich schema are more likely to be cited accurately.'
                });
            }

            if (analysis.meta.issues.length > 0) {
                recs.push({
                    priority: 'high',
                    category: 'Meta Tags',
                    text: `${analysis.meta.issues.join('. ')}. Meta tags provide first-impression context for both LLMs and social sharing.`,
                    action: 'Complete title (50-60 chars), description (120-160 chars), Open Graph tags (og:title, og:description, og:image), and canonical link',
                    why: 'When LLMs crawl your page, meta tags help them quickly understand topic and context before parsing full content.'
                });
            }

            if (analysis.structure.score < 60) {
                recs.push({
                    priority: 'medium',
                    category: 'Content Structure',
                    text: 'Improve heading hierarchy and semantic HTML. LLMs rely on document structure to understand content organization and extract relevant sections.',
                    action: 'Use single H1 for main topic, multiple H2s for sections, H3s for subsections. Add <article>, <nav>, <header>, <footer> tags.',
                    why: 'Clear hierarchy helps LLMs extract specific information when answering queries. Well-structured pages are easier to cite accurately.'
                });
            }

            if (analysis.content.wordCount < 500) {
                recs.push({
                    priority: 'medium',
                    category: 'Content Depth',
                    text: `Content appears thin (${analysis.content.wordCount} words). LLMs prefer comprehensive resources they can confidently cite.`,
                    action: 'Expand to 1000+ words with clear sections, examples, and actionable takeaways. Add bullet lists for scannability.',
                    why: 'Thin content is less likely to be cited by LLMs. Comprehensive guides (1000-2000 words) with clear structure are referenced more often.'
                });
            }

            if (analysis.semantic.score < 60) {
                recs.push({
                    priority: 'low',
                    category: 'Semantic HTML',
                    text: 'Add more structured formatting (lists, emphasis, time tags). These elements help LLMs parse and extract specific information types.',
                    action: 'Use <ul>/<ol> for lists, <strong> for key terms, <time> for dates, <code> for technical terms. Structure makes content machine-readable.',
                    why: 'LLMs can more accurately extract dates, code samples, key concepts, and list items when properly tagged with semantic HTML.'
                });
            }

            recs.push({
                priority: 'info',
                category: 'robots.txt',
                text: 'Verify your robots.txt allows GPTBot, ClaudeBot, and PerplexityBot. Many sites accidentally block AI crawlers.',
                action: 'Check server-side that AI crawlers are not blocked. Add explicit User-agent rules if needed.',
                why: 'If your robots.txt blocks these crawlers, your content will never appear in AI responses regardless of quality.'
            });

            return recs;
        }

        function displayResults(analysis) {
            loading.classList.add('hidden');
            results.classList.remove('hidden');

            // Overall score
            const scoreValue = document.getElementById('scoreValue');
            const scoreCircle = document.getElementById('scoreCircle');
            const scoreStatus = document.getElementById('scoreStatus');
            
            scoreValue.textContent = analysis.overall;
            
            const circumference = 2 * Math.PI * 54;
            const offset = circumference - (analysis.overall / 100) * circumference;
            scoreCircle.style.strokeDashoffset = offset;
            
            if (analysis.overall >= 80) {
                scoreCircle.style.stroke = '#10b981';
                scoreStatus.innerHTML = '<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-900/50 text-green-300 border border-green-500/50">Excellent LLM Readiness</span>';
            } else if (analysis.overall >= 60) {
                scoreCircle.style.stroke = '#3b82f6';
                scoreStatus.innerHTML = '<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-900/50 text-blue-300 border border-blue-500/50">Good LLM Readiness</span>';
            } else if (analysis.overall >= 40) {
                scoreCircle.style.stroke = '#f59e0b';
                scoreStatus.innerHTML = '<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-900/50 text-yellow-300 border border-yellow-500/50">Needs Improvement</span>';
            } else {
                scoreCircle.style.stroke = '#ef4444';
                scoreStatus.innerHTML = '<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-900/50 text-red-300 border border-red-500/50">Poor LLM Readiness</span>';
            }

            // Category cards
            displayCategoryCard('schemaCard', 'Schema Markup', analysis.schema);
            displayCategoryCard('metaCard', 'Meta Tags', analysis.meta);
            displayCategoryCard('structureCard', 'Content Structure', analysis.structure);
            displayCategoryCard('robotsCard', 'Crawler Access', analysis.robots);
            displayCategoryCard('contentCard', 'Content Quality', analysis.content);
            displayCategoryCard('semanticCard', 'Semantic HTML', analysis.semantic);

            // Recommendations
            displayRecommendations(analysis.recommendations);
        }

        function displayCategoryCard(elementId, title, data) {
            const card = document.getElementById(elementId);
            const color = data.score >= 70 ? 'green' : data.score >= 40 ? 'blue' : 'red';
            
            const detailsHtml = data.details && data.details.length > 0 
                ? `<div class="mt-3 pt-3 border-t border-slate-700 space-y-1">
                    ${data.details.map(d => `<p class="text-xs text-slate-400">‚Ä¢ ${d}</p>`).join('')}
                   </div>`
                : '';
            
            card.innerHTML = `
                <div class="bg-slate-900 rounded-lg p-6 border border-slate-700 h-full">
                    <h4 class="text-lg font-semibold text-white mb-3">${title}</h4>
                    <div class="flex items-center gap-3 mb-3">
                        <div class="text-3xl font-bold text-${color}-400">${data.score}</div>
                        <div class="text-sm text-slate-400">/ 100</div>
                    </div>
                    <div class="w-full bg-slate-800 rounded-full h-2 mb-3">
                        <div class="bg-${color}-500 h-2 rounded-full transition-all duration-500" style="width: ${data.score}%"></div>
                    </div>
                    <p class="text-sm text-slate-400 mb-2">${data.status}</p>
                    ${detailsHtml}
                </div>
            `;
        }

        function displayRecommendations(recs) {
            const container = document.getElementById('recommendations');
            container.innerHTML = recs.map(rec => {
                const colors = {
                    high: { bg: 'bg-red-900/20', border: 'border-red-500/50', text: 'text-red-400', badge: 'bg-red-900 text-red-200' },
                    medium: { bg: 'bg-yellow-900/20', border: 'border-yellow-500/50', text: 'text-yellow-400', badge: 'bg-yellow-900 text-yellow-200' },
                    low: { bg: 'bg-blue-900/20', border: 'border-blue-500/50', text: 'text-blue-400', badge: 'bg-blue-900 text-blue-200' },
                    info: { bg: 'bg-slate-800', border: 'border-slate-600', text: 'text-slate-300', badge: 'bg-slate-700 text-slate-300' }
                };
                const c = colors[rec.priority];
                
                return `
                    <div class="${c.bg} border ${c.border} rounded-lg p-5">
                        <div class="flex items-start gap-3">
                            <span class="px-2 py-1 text-xs font-semibold ${c.badge} rounded uppercase">${rec.priority}</span>
                            <div class="flex-1">
                                <h4 class="font-semibold ${c.text} mb-2">${rec.category}</h4>
                                <p class="text-slate-300 text-sm mb-3">${rec.text}</p>
                                <div class="bg-slate-900/50 rounded p-3 mb-2">
                                    <p class="text-slate-300 text-sm"><strong class="text-white">Action:</strong> ${rec.action}</p>
                                </div>
                                ${rec.why ? `<p class="text-slate-400 text-xs"><strong>Why it matters:</strong> ${rec.why}</p>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showError(message) {
            hideAll();
            error.classList.remove('hidden');
            document.getElementById('errorMessage').textContent = message;
        }

        function hideAll() {
            loading.classList.add('hidden');
            results.classList.add('hidden');
            error.classList.add('hidden');
        }
    </script>
</body>
</html>